---
deployment: cf

jobs:
  - name: micro
    templates:
      - postgres
  - name: micro_ng
    templates:
      - nats
      - nats_stream_forwarder
      - etcd
      - hm9000
      - cloud_controller_ng
      - cloud_controller_worker
      - cloud_controller_clock
      - uaa
      - haproxy
      - gorouter
      - dea_next
      - loggregator_trafficcontroller
      - doppler
      - metron_agent
      - dea_logging_agent
      - etcd_metrics_server
      - consul_agent

properties:
  networks:
    apps: default

  domain: 140.92.26.9.xip.io
  ssl:
    skip_cert_verify: true
  system_domain: 140.92.26.9.xip.io
  system_domain_organization: DevBox
  app_domains:
    - 140.92.26.9.xip.io

  disk_quota_enabled: true

  nats:
    user: nats
    password: c1oudc0w
    address: 140.92.26.9
    port: 4222
    machines:
      - 140.92.26.9

  dea_next:
    heartbeat_interval_in_seconds: 60

  cc: &cc
    bulk_api_password: c1oudc0w
    srv_api_uri: https://api.140.92.26.9.xip.io
    db_logging_level: debug2
    logging_level: debug2
    ccng.logging_level: debug2
    db_encryption_key: c1oudc0w
    quota_definitions:
      default:
        memory_limit: 10240
        total_services: 100
        non_basic_services_allowed: true
        total_routes: 1000
        trial_db_allowed: true
    hm9000_noop: false
    staging_upload_user: uploaduser
    staging_upload_password: c1oudc0w
    install_buildpacks:
      - name: java_buildpack
        package: buildpack_java
      - name: ruby_buildpack
        package: buildpack_ruby
      - name: nodejs_buildpack
        package: buildpack_nodejs
    security_group_definitions:
      - name: public_networks
        rules:
          - protocol: all
            destination: 0.0.0.0-9.255.255.255
          - protocol: all
            destination: 11.0.0.0-169.253.255.255
          - protocol: all
            destination: 169.255.0.0-172.15.255.255
          - protocol: all
            destination: 172.32.0.0-192.167.255.255
          - protocol: all
            destination: 192.169.0.0-255.255.255.255
      - name: private_networks
        rules:
          - protocol: all
            destination: 10.0.0.0-10.255.255.255
          - protocol: all
            destination: 172.16.0.0-172.31.255.255
          - protocol: all
            destination: 192.168.0.0-192.168.255.255
      - name: dns
        rules:
          - protocol: tcp
            destination: 0.0.0.0/0
            ports: '53'
          - protocol: udp
            destination: 0.0.0.0/0
            ports: '53'
    default_running_security_groups:
      - public_networks
      - private_networks
      - dns
    default_staging_security_groups:
      - public_networks
      - private_networks
      - dns
    internal_api_password: c1oudc0w
  ccng: *cc

  ccdb: &ccdb
    db_scheme: postgres
    address: 140.92.26.9
    port: 5524
    roles:
      - tag: admin
        name: ccadmin
        password: c1oudc0w
    databases:
      - tag: cc
        name: ccdb
        citext: true
  ccdb_ng: *ccdb

  uaadb:
    db_scheme: postgresql
    address: 140.92.26.9
    port: 5524
    roles:
      - tag: admin
        name: uaaadmin
        password: c1oudc0w
    databases:
      - tag: uaa
        name: uaadb
        citext: true

  databases:
    db_scheme: postgres
    address: 140.92.26.9
    port: 5524
    roles:
      - tag: admin
        name: ccadmin
        password: c1oudc0w
      - tag: admin
        name: uaaadmin
        password: c1oudc0w
    databases:
      - tag: cc
        name: ccdb
        citext: true
      - tag: uaa
        name: uaadb
        citext: true
  db: databases

  uaa:
    ldap:
      enabled: true
      profile_type: search-and-bind
      url: 'ldap://140.92.26.148:3890/'
      userDN: 'cn=admin,dc=puppetlabs,dc=test'
      userPassword: 'test'
      searchBase: 'dc=puppetlabs,dc=test'
      searchFilter: 'cn={0}'
    login:
      addnew: false
      client_secret: c1oudc0w
    url: https://uaa.140.92.26.9.xip.io
    catalina_opts: -Xmx384m -XX:MaxPermSize=128m
    jwt:
      signing_key: |
        -----BEGIN RSA PRIVATE KEY-----
        MIICXAIBAAKBgQDHFr+KICms+tuT1OXJwhCUmR2dKVy7psa8xzElSyzqx7oJyfJ1
        JZyOzToj9T5SfTIq396agbHJWVfYphNahvZ/7uMXqHxf+ZH9BL1gk9Y6kCnbM5R6
        0gfwjyW1/dQPjOzn9N394zd2FJoFHwdq9Qs0wBugspULZVNRxq7veq/fzwIDAQAB
        AoGBAJ8dRTQFhIllbHx4GLbpTQsWXJ6w4hZvskJKCLM/o8R4n+0W45pQ1xEiYKdA
        Z/DRcnjltylRImBD8XuLL8iYOQSZXNMb1h3g5/UGbUXLmCgQLOUUlnYt34QOQm+0
        KvUqfMSFBbKMsYBAoQmNdTHBaz3dZa8ON9hh/f5TT8u0OWNRAkEA5opzsIXv+52J
        duc1VGyX3SwlxiE2dStW8wZqGiuLH142n6MKnkLU4ctNLiclw6BZePXFZYIK+AkE
        xQ+k16je5QJBAN0TIKMPWIbbHVr5rkdUqOyezlFFWYOwnMmw/BKa1d3zp54VP/P8
        +5aQ2d4sMoKEOfdWH7UqMe3FszfYFvSu5KMCQFMYeFaaEEP7Jn8rGzfQ5HQd44ek
        lQJqmq6CE2BXbY/i34FuvPcKU70HEEygY6Y9d8J3o6zQ0K9SYNu+pcXt4lkCQA3h
        jJQQe5uEGJTExqed7jllQ0khFJzLMx0K6tj0NeeIzAaGCQz13oo2sCdeGRHO4aDh
        HH6Qlq/6UOV5wP8+GAcCQFgRCcB+hrje8hfEEefHcFpyKH+5g1Eu1k0mLrxK2zd+
        4SlotYRHgPCEubokb2S1zfZDWIXW3HmggnGgM949TlY=
        -----END RSA PRIVATE KEY-----
      verification_key: |
        -----BEGIN PUBLIC KEY-----
        MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDHFr+KICms+tuT1OXJwhCUmR2d
        KVy7psa8xzElSyzqx7oJyfJ1JZyOzToj9T5SfTIq396agbHJWVfYphNahvZ/7uMX
        qHxf+ZH9BL1gk9Y6kCnbM5R60gfwjyW1/dQPjOzn9N394zd2FJoFHwdq9Qs0wBug
        spULZVNRxq7veq/fzwIDAQAB
        -----END PUBLIC KEY-----
    cc:
      client_secret: c1oudc0w
    admin:
      client_secret: c1oudc0w
    batch:
      username: batch-username
      password: c1oudc0w
    clients:
      login:
        override: true
        scope: openid,oauth.approvals
        authorities: oauth.login,scim.write,clients.read,notifications.write,critical_notifications.write,emails.write,scim.userids,password.write
        secret: c1oudc0w
        authorized-grant-types: authorization_code,client_credentials,refresh_token
      notifications:
        secret: c1oudc0w
        authorities: cloud_controller.admin,scim.read
        authorized-grant-types: client_credentials
      doppler:
        override: true
        authorities: uaa.resource
        secret: c1oudc0w
      cloud_controller_username_lookup:
        authorities: scim.userids
        secret: c1oudc0w
        authorized-grant-types: client_credentials
      gorouter:
        authorities: clients.read,clients.write,clients.admin,route.admin,route.advertise
        authorized-grant-types: client_credentials,refresh_token
        scope: openid,cloud_controller_service_permissions.read
        secret: c1oudc0w

    scim:
      users:
      - admin|c1oudc0w|scim.write,scim.read,openid,cloud_controller.admin,doppler.firehose,uaa.admin,password.write

  etcd:
    machines:
      - 140.92.26.9

  etcd_metrics_server:
    nats:
      username: nats
      password: c1oudc0w
      machines:
        - 140.92.26.9

  consul:
      require_ssl: false
      encrypt_keys: []

  router:
    port: 8888
    enable_routing_api: false
    status:
      port: 18888
      user: gorouter
      password: c1oudc0w
    servers:
      z1:
        - 140.92.26.9
      z2: []

  login:
    enabled: false

  loggregator:
    incoming_port: 13456
    dropsonde_incoming_port: 13457
    outgoing_dropsonde_port: 18081
    doppler_port: 8081

  metron_agent:
    zone: default
    status:
      user: trafic_controller
      password: c1oudc0w
      port: 6799
    incoming_port: 3456
    dropsonde_incoming_port: 3457
    deployment: default

  doppler:
    zone: default
    status:
      user: loggregator
      password: c1oudc0w
      port: 5768
    incoming_port: 13456
    dropsonde_incoming_port: 13457
    outgoing_port: 8081
    servers:
      default:
        - 140.92.26.9

  traffic_controller:
    zone: default
    status:
      user: trafic_controller
      password: c1oudc0w
      port: 6789
    incoming_port: 23456
    outgoing_port: 18080

  metron_endpoint:
    shared_secret: c1oudc0w
    host: 127.0.0.1
    port: 3456
    dropsonde_port: 3457

  logger_endpoint:
   port: 4443

  loggregator_endpoint:
    shared_secret: c1oudc0w

  doppler_endpoint:
    shared_secret: c1oudc0w

  dropsonde:
    enabled: true

  ha_proxy:
    ssl_pem: |
      -----BEGIN CERTIFICATE-----
      MIIDKDCCAhACCQCJYHcKxu6umDANBgkqhkiG9w0BAQsFADBWMQswCQYDVQQGEwJV
      UzEUMBIGA1UECAwLQ29ubmVjdGljdXQxEjAQBgNVBAcMCU5ldyBIYXZlbjEdMBsG
      A1UEAwwUKi4xNDAuOTIuMjYuOS54aXAuaW8wHhcNMTUxMDA4MDE1NTM4WhcNMTYx
      MDA3MDE1NTM4WjBWMQswCQYDVQQGEwJVUzEUMBIGA1UECAwLQ29ubmVjdGljdXQx
      EjAQBgNVBAcMCU5ldyBIYXZlbjEdMBsGA1UEAwwUKi4xNDAuOTIuMjYuOS54aXAu
      aW8wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQCpy2Rg1FzGoZWc7kAU
      wuji1AV+iLOcBD161yAVqXpI5/NmNeIwvAhqPcq0fpK+yvwKn2da70HrVTooyfmT
      11hPiEvcFcw9yTBfrpqgcCMCn2R+F2eerKcxkTsXnEjNbt42KXwi7w/hstIPmjyf
      TXqimODBCMRqegSN+DrL6exkK/d/TMId8uPwW0J0fHeTJbItm3a8Ic9m1KdWQlbJ
      jZcFg7UR98HHQiDY37ZSYlsyls0dR7ElmxE5+KSKQhSL8erwCzEiaDWDOdab52mP
      O/kw562iD+8o4o+MrvCeEPEpVSge88zrGdw0jQgO1QIDQriLtoAcK12R9i/1JmAB
      LcjFAgMBAAEwDQYJKoZIhvcNAQELBQADggEBAIOTJQU8w6pmjU82faBuIb0Ky7UT
      MIlPKPigIb+BXeVAhGF9sfv1VVw7l89K8zdgI9b4vggLnmmv/Gt5BWeaECKbzf34
      XqCxnSPbj7vVtulL3QbkRXhMSmeSCuVNl4Dw6Ue+njX4B9FinJAlN8qth4tILapp
      Ffa2MYg7ssSukcJABe1wscZ+6YfOq+Y1ZLO7IcQcz0sDllCefTNew1gq33yLpoJn
      r0rnq1GXpUXKhxwXtaD4p+Hp7jYwNwranFQJmM/Eu4pXmV5EswG3xbXH+2LzaDho
      3OowXuK0Bkf47yRO1wupStIz7t4OBLEkrkAZyBEDO2C5ERAbjhBJ3yQ9Sx8=
      -----END CERTIFICATE-----
      -----BEGIN RSA PRIVATE KEY-----
      MIIEogIBAAKCAQEAqctkYNRcxqGVnO5AFMLo4tQFfoiznAQ9etcgFal6SOfzZjXi
      MLwIaj3KtH6Svsr8Cp9nWu9B61U6KMn5k9dYT4hL3BXMPckwX66aoHAjAp9kfhdn
      nqynMZE7F5xIzW7eNil8Iu8P4bLSD5o8n016opjgwQjEanoEjfg6y+nsZCv3f0zC
      HfLj8FtCdHx3kyWyLZt2vCHPZtSnVkJWyY2XBYO1EffBx0Ig2N+2UmJbMpbNHUex
      JZsROfikikIUi/Hq8AsxImg1gznWm+dpjzv5MOetog/vKOKPjK7wnhDxKVUoHvPM
      6xncNI0IDtUCA0K4i7aAHCtdkfYv9SZgAS3IxQIDAQABAoIBAG35nvpYkf7VieIr
      LrZDyDOiwCxEvpC+7lMyI0Xkj5/JHI2HOQn3wDuP6ksd8E5DixwWQwtTDI8wlIr2
      xwBK6pgY34mdVLxwIzTWErD38LUyKBTDdAoCKgig2HVidIUa2jKajBzUWqUE/am9
      bKaBuHy4KFrfItkUTv7lWK/aw5HdGYsTR+Ox+bwPxM/UNmH0EzHuBhvErvA3fkgA
      oA0QsAlpdx0vA3Z5u9yHCJDYtW52TqGaFy6a1XraIy72HKcrRULGNFppG42YxYnf
      TwbyD6Bib/L3skSZGr05NVu98Ol1kU297WJwCsKkvpkTX3FizugF9NBrBXY64bkB
      6TC6ScECgYEA4LQJyFdyUvC8gdhuhYBx2t2nztHfrUEWAg8fIAPO67w7Jc3qyt/U
      e8JHUeTpia6lcPb9Qh/jcfgSWdrXmKVWmaLATjoFzMidKTxJciK+3nalMpkh/3aH
      +/DIsK126c0/ex11AayiiMNJ2FXVw1XDYzGcl8YzdcCgwuY5AAMnfK8CgYEAwXGK
      ddNGyBvV8SYVb0koqjaQ/XJY125dxi+Aw9yDV6k8+iREWTLnaCmWVc82ldaqEWpE
      TTJh0Fa+pPMAp+swzySAr/R2J44BZgxQI2M3+YTKDayJvlBX4PWdkuUyBx9BCI8n
      ZjZHk/sn96wmwZeUXhFQo5fgCTKAaiPYOrq/NssCgYBn9AKek44JPuQGsgkXa//A
      QFE0xjVTosu6siI1Hm3o8xDuAWCA8KINiyiRg3RjRM+2/hzWLYh8nkZnGW4qaTsy
      InATAJbUUW8bt49G5TomEv+D9AIdfEmWzaMa0XU03sZif5M07hfXa3lLQxJ8pr2Y
      s0f9ky0VacM1x2pRTiRDcwKBgFzD2iZOvy7PSnVuUfEgIEQgDr+7yiblYkrcFN/Y
      K5QqMHe0VKKB6r7k0pcr231XiA756u8qLgX+00W+0p20B6AOXTgD/3VQgBMz7GpL
      9lfN+ic8ioGdfcb/giUjjC4mKsW0AKzfcsvgMXZwM9W6nwfNPeJ1vpYqhbJgphzj
      2TapAoGASm8Zln5wAxBVW+81EuYtqbrxxyv9+RPlMh2Au3FRZX6ohroM5CjKnUcl
      4SlTMrlZRdqO4+wgxSisOtYMreCTrSQTlfCSpA9kam336jjJnc4ngyJmhzh4LaOp
      VxUWV3ipjOK3opwDV2FztNyzqgLlqcNim2BuakdujMVZBHino7Y=
      -----END RSA PRIVATE KEY-----
